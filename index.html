<!DOCTYPE html>
<html>

  <head>
    <!-- <meta charset='utf-8'> -->
    <!-- <meta http-equiv="X-UA-Compatible" content="chrome=1"> -->
    <!-- <meta name="description" content="Gmail : A mockup web app using Polymer framework ( or library )."> -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.90">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <script src="bower_components/webcomponentsjs/webcomponents.js"></script>
    <link rel="import" href="elements.html">
    <link rel="import" href="route.html">
    <link rel="stylesheet" href="app.css">

    <title>Gmail</title>
  </head>

  <body fullbleed layout vertical fit>


    <template is="auto-binding" id="app">
      <more-route-selector>
            <core-pages selected="{{route}}" fullbleed fit layout vertical>
              <section route="login" >
                  <div id="loginscreen" layout vertical center-center fit
                     class="{{ {show: !isAuthenticated} | tokenList }}">
                  <google-signin width="wide" height="tall"
                      clientId="734681955886-tfnfanpm9kqt60lvjrjqj9mc6emv80qa.apps.googleusercontent.com"
                      scopes="profile email https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/gmail.modify"
                      on-google-signin-success="{{onSigninSuccess}}"
                      on-google-signin-failure="{{onSigninFailure}}"></google-signin>
                  </div>
              </section>
              <section route="inbox" fullbleed fit layout vertical>
                    <core-header-panel flex>
                      <core-toolbar class="toolbar-smaller">
                        <paper-icon-button onclick="toggleDrawer()" icon="menu" id="navicon" >
                        </paper-icon-button> 
                        <div flex> {{heading}}</div>
                         <paper-icon-button icon="apps"  >
                         <paper-dropdown-menu label="Your favorite pastry">
                            <paper-dropdown class="dropdown">
                                <core-menu class="menu">
                                    <paper-item>Croissant</paper-item>
                                    <paper-item>Donut</paper-item>
                                    <paper-item>Financier</paper-item>
                                    <paper-item>Madeleine</paper-item>
                                </core-menu>
                            </paper-dropdown>
                        </paper-dropdown-menu>
                        </paper-icon-button> 
                        <core-image class="avatar" src="{{user.profile_image}}"></core-image>
<!--                         <google-signin width="wide" height="tall"
                          clientId="734681955886-tfnfanpm9kqt60lvjrjqj9mc6emv80qa.apps.googleusercontent.com"
                          scopes="profile email https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/gmail.modify"
                          on-google-signin-success="{{onSigninSuccess}}"
                          on-google-signin-failure="{{onSigninFailure}}"></google-signin> -->
                      </core-toolbar>




                      <core-drawer-panel id="drawerPanel" >

                        <core-header-panel drawer id="menu">
                            <core-menu class="menu">
                                <paper-item onclick="refreshEmails('INBOX')"><core-icon class="blue" icon="mail"></core-icon> Inbox</paper-item>
                                <div class="separator"></div>
                                <paper-item onclick="refreshEmails('STARRED')"><core-icon icon="star"></core-icon> Starred</paper-item>
                                <paper-item onclick="refreshEmails('IMPORTANT')"><core-icon icon="turned-in"></core-icon> Important</paper-item>
                                <paper-item onclick="refreshEmails('DRAFTS')"><core-icon icon="drafts"></core-icon> Drafts</paper-item>
                                <paper-item onclick="refreshEmails('SENT')"><core-icon icon="send"></core-icon> Sent</paper-item>
                            </core-menu>
                        </core-header-panel> 
                        <core-header-panel main flex layout vertical>
                          <core-animated-pages  selected="{{main_page}}" transitions="slide-from-right"  flex>
                            <section flex>
                              <core-list  style="min-height:400px;" data="{{threads}}" flex>
                                <template>
                                    <div class="row"  layout horizontal >
                                      <div layout vertical>
                                        <template if="{{users[model.messages[0].from.name]}}"> 
                                          <core-image class="avatar" src="{{users[model.messages[0].from.name]}}"></core-image>
                                        </template>
                                        <template if="{{!users[model.messages[0].from.name]}}">

                                          <div class="avatar">
                                            <span class="letter" layout horizontal center-center>{{model.messages[0].from.initial}}</span>
                                          </div>
                                        </template>
                                       
                                      </div>
                                      <div layout vertical flex style="cursor:pointer;" onclick="viewEmail({{index}})">
                                        <div style="display:none;">{{index}}</div>
                                        <div  layout horizontal><span class="thread-name" flex>{{model.messages[0].from.name}}</span><span>{{model.messages[0].date}}</span></div>
                                        <div class="thread-subject">{{model.messages[0].subject}}</div>
                                        <div style="padding-bottom:5px;font-size:10px;">{{model.messages[0].snippet}}</div>
                                      </div>
                                  </div>
                                </template>
                              </core-list>
                                <core-menu class="menu">
                                  <paper-item horizontal center-justified layout onclick="refreshEmails()"><core-icon icon="cloud-download"></core-icon> More </paper-item>
                                </core-menu>
                            </section>
                            <section flex  >
                                <core-header-panel style="min-height:800px;">
                                  <core-toolbar class="toolbar-smaller dark-grey">
                                      <paper-button onclick="goback()">
                                        <core-icon icon="arrow-back" class="icon-with-text"></core-icon>
                                        <span >{{back_content}}</span>
                                      </paper-button>
                                      <div flex>
                                      </div>
                                      <core-icon icon="archive">
                                      </core-icon>
                                      <core-icon icon="report">
                                      </core-icon>
                                      <core-icon icon="delete">
                                      </core-icon>
                                      <core-icon icon="folder">
                                      </core-icon>
                                      <core-icon icon="loyalty">
                                      </core-icon>
                                  </core-toolbar>
                                  <div class="email-header" layout horizontal>
                                    <span flex>
                                    {{email_subject}}
                                    </span>
                                  </div>
                                  <div flex id="email-body-id" class="email-body">  
                                      <div id="body_holder">
                                        body_holder
                                      </div>
                                  </div>
                                 
                                  

                                  </core-header-panel>
                                </core-header-panel>
                            </section>
                          </core-animated-pages>
                          



                        </core-header-panel>
                      </core-drawer-panel>
                     <paper-fab class="down-right-button" icon="add"></paper-fab>
                    </core-header-panel>
              </section>

            </core-pages>
      </more-route-selector>


        
    </template>

  </body>

    <script src="https://apis.google.com/js/client.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="base64.js"></script>
    <script src="app.js"></script>
</html>
